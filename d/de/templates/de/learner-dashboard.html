{% load static %}
<!DOCTYPE html>
<html lang="{{ current_language }}" data-current-lang="{{ current_language }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ translations.pageTitle }}</title>
    <meta name="description" content="{{ translations.pageDescription }}">
    <link rel="stylesheet" href="{% static 'dashboard-styles.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Translations data for JavaScript -->
    <script id="translations-data" type="application/json">
        {{ all_translations|safe }}
    </script>
</head>
<body>
    
    <div class="background-container">
        <div class="gradient-bg"></div>
        <div class="particles"></div>
        <div class="floating-shapes"></div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Navigation -->
        <nav class="top-nav" role="navigation" aria-label="Main navigation">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="/de/" class="logo-link">
                        <h1 class="logo" id="navBrand">{{ translations.navBrand }}</h1>
                    </a>
                </div>
                
                <!-- Language Selector -->
                <div class="language-selector">
                    <button class="language-btn" id="languageBtn" aria-label="{{ translations.selectLanguage }}" aria-expanded="false">
                        <span class="language-icon">üåê</span>
                        <span class="current-lang" data-lang="{{ current_language }}">
                            {% if current_language == 'en' %}English
                            {% elif current_language == 'hi' %}‡§π‡§ø‡§®‡•ç‡§¶‡•Ä
                            {% elif current_language == 'ta' %}‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç
                            {% elif current_language == 'bn' %}‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ
                            {% elif current_language == 'gu' %}‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä
                            {% endif %}
                        </span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <ul class="language-dropdown" id="languageDropdown" role="menu">
                        <li role="menuitem">
                            <button class="lang-option" data-lang="en">English</button>
                        </li>
                        <li role="menuitem">
                            <button class="lang-option" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
                        </li>
                        <li role="menuitem">
                            <button class="lang-option" data-lang="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
                        </li>
                        <li role="menuitem">
                            <button class="lang-option" data-lang="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
                        </li>
                        <li role="menuitem">
                            <button class="lang-option" data-lang="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Dashboard Content -->
        <div class="dashboard-container" id="dashboard-container">
            <!-- Welcome Section -->
            <section class="welcome-section">
                <h2 class="welcome-title" id="welcomeTitle">{{ translations.welcome }}, {{ user_name }}!</h2>
                <p class="welcome-subtitle" id="welcomeSubtitle">{{ translations.welcomeSubtitle }}</p>
            </section>

            <!-- Main Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Profile Card -->
                <div class="profile-card" id="profileCard">
                    <div class="card-header">
                        <h3 class="card-title" id="profileCardTitle">{{ translations.profileCard }}</h3>
                        <div class="profile-avatar">
                            <div class="avatar-circle">
                                <span class="avatar-text">{{ profile.first_name.0|upper|default:"L" }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="profile-info">
                        <h4 class="profile-name">{{ profile.full_name }}</h4>
                        <p class="profile-role">{{ profile.experience|default:"Learner" }}</p>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number">{{ profile.skills|length }}</span>
                                <span class="stat-label" id="skillsLearned">{{ translations.skillsLearned }}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">{{ profile.current_level|default:"Beginner" }}</span>
                                <span class="stat-label" id="currentLevel">{{ translations.currentLevel }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Learning Progress -->
                <div class="progress-section">
                    <h3 class="section-title" id="learningProgressTitle">{{ translations.learningProgress }}</h3>
                    <div class="progress-rings">
                        <div class="progress-ring">
                            <div class="ring-container">
                                <svg class="progress-svg" viewBox="0 0 100 100">
                                    <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                                    <circle class="progress-bar" cx="50" cy="50" r="45" id="progressCircle1"></circle>
                                </svg>
                                <div class="progress-text">
                                    <span class="progress-number" id="progressNumber1">{{ profile.courses_completed|default:"0" }}</span>
                                    <span class="progress-label" id="coursesCompleted">{{ translations.coursesCompleted }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="progress-ring">
                            <div class="ring-container">
                                <svg class="progress-svg" viewBox="0 0 100 100">
                                    <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                                    <circle class="progress-bar" cx="50" cy="50" r="45" id="progressCircle2"></circle>
                                </svg>
                                <div class="progress-text">
                                    <span class="progress-number" id="progressNumber2">{{ profile.hours_spent|default:"0" }}</span>
                                    <span class="progress-label" id="hoursSpent">{{ translations.hoursSpent }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="progress-ring">
                            <div class="ring-container">
                                <svg class="progress-svg" viewBox="0 0 100 100">
                                    <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                                    <circle class="progress-bar" cx="50" cy="50" r="45" id="progressCircle3"></circle>
                                </svg>
                                <div class="progress-text">
                                    <span class="progress-number" id="progressNumber3">{{ profile.achievements|default:"0" }}</span>
                                    <span class="progress-label" id="achievements">{{ translations.achievements }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3 class="section-title" id="quickActionsTitle">{{ translations.quickActions }}</h3>
                    <div class="action-cards">
                        <div class="action-card" id="profileBuilderCard" tabindex="0" role="button">
                            <div class="card-icon">üë§</div>
                            <h4 class="card-title" id="profileBuilderTitle">{{ translations.profileBuilder }}</h4>
                            <p class="card-description" id="buildProfileDesc">{{ translations.buildProfile }}</p>
                            <div class="card-glow"></div>
                        </div>
                        <div class="action-card" id="careerExplorerCard" tabindex="0" role="button">
                            <div class="card-icon">üîç</div>
                            <h4 class="card-title" id="careerExplorerTitle">{{ translations.careerExplorer }}</h4>
                            <p class="card-description" id="exploreCareersDesc">{{ translations.exploreCareers }}</p>
                            <div class="card-glow"></div>
                        </div>
                        <div class="action-card" id="recommendationViewerCard" tabindex="0" role="button">
                            <div class="card-icon">üí°</div>
                            <h4 class="card-title" id="recommendationViewerTitle">{{ translations.recommendationViewer }}</h4>
                            <p class="card-description" id="viewRecommendationsDesc">{{ translations.viewRecommendations }}</p>
                            <div class="card-glow"></div>
                        </div>
                    </div>
                </div>

                <!-- Motivational Quote -->
                <div class="quote-section">
                    <h3 class="section-title" id="motivationalQuoteTitle">{{ translations.motivationalQuote }}</h3>
                    <div class="quote-card">
                        <div class="quote-content">
                            <p class="quote-text" id="quoteText">{{ translations.quote1 }}</p>
                            <p class="quote-author" id="quoteAuthor">- Winston Churchill</p>
                        </div>
                        <div class="quote-icon">üí´</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- AI Chatbot -->
    <div class="chatbot-container" id="chatbotContainer">
        <button class="chatbot-toggle" id="chatbotToggle" aria-label="Open AI Career Assistant">
            <div class="chat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
            </div>
            <div class="pulse-ring"></div>
            <div class="pulse-ring-2"></div>
        </button>

        <!-- Chat Window -->
        <div class="chatbot-window" id="chatbotWindow">
            <!-- Chat Header -->
            <div class="chatbot-header">
                <div class="header-content">
                    <div class="assistant-info">
                        <div class="status-indicator">
                            <div class="status-dot"></div>
                        </div>
                        <h3 class="assistant-title" id="assistantTitle">{{ translations.aiAssistant }}</h3>
                    </div>
                    <div class="header-actions">
                        <!-- Language Toggle -->
                        <div class="chatbot-language-selector">
                            <button class="chatbot-lang-btn" id="chatbotLangBtn" aria-label="Select language">
                                <span class="lang-icon">üåê</span>
                                <span class="current-lang" data-lang="{{ current_language }}">{{ current_language|upper }}</span>
                            </button>
                            <ul class="chatbot-lang-dropdown" id="chatbotLangDropdown">
                                <li><button class="lang-option" data-lang="en">English</button></li>
                                <li><button class="lang-option" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button></li>
                                <li><button class="lang-option" data-lang="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button></li>
                                <li><button class="lang-option" data-lang="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button></li>
                                <li><button class="lang-option" data-lang="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</button></li>
                            </ul>
                        </div>
                        <button class="minimize-btn" id="minimizeBtn" aria-label="Minimize chat">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Chat Messages Area -->
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="welcome-message">
                    <div class="message bot-message">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <p id="welcomeText">{{ translations.aiWelcome }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="chatbot-input-area">
                <div class="input-container">
                    <input type="text" 
                           class="chatbot-input" 
                           id="chatbotInput" 
                           placeholder="{{ translations.typePlaceholder }}"
                           aria-label="Type your message">
                    <button class="send-btn" id="sendBtn" aria-label="Send message">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22,2 15,22 11,13 2,9 22,2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'dashboard-script.js' %}"></script>
    <script src="{% static 'chatbot-script.js' %}"></script>
</body>
</html>